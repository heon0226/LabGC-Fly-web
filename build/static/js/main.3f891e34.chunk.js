(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{1366:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(86),c=a.n(o),l=a(112),i=a(35),s=(a(593),a(581)),u={width:"auto",border:"1px solid rgba(0, 0, 0, .4)",display:"flex",margin:"5% auto",padding:"10px",flexDirection:"column",justifyContent:"space-around",backgroundColor:"whitesmoke"},m=function(e){return r.a.createElement(s.a,{style:u,className:"justify-content-md-center"},e.children)},d=a(6),f=a(1376),p=a(1375),E={fieldset:{width:"100%",minHeight:"70%",display:"inline",border:"1px solid rgba(0, 0, 0, .4)",padding:"10px",margin:"40px 0px"},legend:{width:"auto",marginLeft:"5px",padding:"0 10px",fontSize:"20px"}},g=function(e){return r.a.createElement("fieldset",{style:E.fieldset},r.a.createElement("legend",{style:E.legend},e.title),e.children)},h={fontSize:"16px",fontFamily:"Consolas, sans-serif",margin:"5px auto auto auto",minHeight:"25px"},b={fontSize:"16px",fontFamily:"Consolas, sans-serif",border:"1px solid rgba(0, 0, 0, .4)",margin:"5px auto",minWidth:"50px",minHeight:"25px",textAlign:"center"},y={width:"90%",margin:"auto",textAlign:"center",border:"1px solid rgba(0, 0, 0, .4)",fontFamily:"Consolas, sans-serif",tableLayout:"fixed"},j={emptyCells:"show",border:"1px solid rgba(0, 0, 0, .4)",fontFamily:"Consolas, sans-serif"},v={emptyCells:"show",border:"1px solid rgba(0, 0, 0, .4)",fontFamily:"Consolas, sans-serif",backgroundColor:"white"},O={border:"1px solid rgba(0, 0, 0, .3)",width:"100px",margin:"10px",outlineColor:"rgba(0, 0, 0, .4)"},x={border:"1px solid #adadad",backgroundColor:"#e1e1e1",textAlign:"center",padding:"5px",margin:"5px 10px"},S={height:"10px",overflowY:"scroll"},C={backgroundColor:"white"},k={showLegend:!0,xaxis:{rangemode:"tozero",title:"PCR Cycles"},yaxis:{rangemode:"nonnegative",title:"Sensor Value",range:[0,4096]}},w={showLegend:!0,xaxis:{rangemode:"tozero",title:"Time"},yaxis:{rangemode:"tozero",title:"Temperture"}},_={height:"30rem"},N={width:"100%",height:"100%"},P=function(e){return r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"Serial Number"),r.a.createElement(p.a,{style:b},e.serialNumber)),r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"Status"),r.a.createElement(p.a,{style:b},e.isConnected?"Connected":"Disconnected")))},T=function(e){return r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"Protocol"),r.a.createElement(p.a,{style:b},e.protocolName)),r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"State"),r.a.createElement(p.a,{style:b},e.state)),r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"Total Sec"),r.a.createElement(p.a,{style:b},e.remainingTotalSec)))},H=a(213),F=a.n(H),R=a(214),I=a.n(R),z=I()(F.a),L={width:"100%"},A={showLegend:!0,xaxis:{rangemode:"tozero",title:"PCR Cycles",range:[0,40]},yaxis:{rangemode:"nonnegative",title:"Sensor Value",range:[0,4096]}},D={responsive:!1,displaylogo:!0,scrollZoom:!1,staticPlot:!0,displayModeBar:!1},B=["FAM","HEX","ROX","CY5"],M=["#105f89","#54ab48","#80c13f","#d92623"],X=function(e){return r.a.createElement(z,{style:L,layout:A,config:D,data:function(t){var a=[];return e.displayFilters.forEach((function(e,n){e&&a.push({name:B[n],x:t[n].length,y:t[n],type:"line",line:{color:M[n]}})})),a}(e.photodiodes)})},Y=function(e){return r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"\xa0")),r.a.createElement(f.a,null,r.a.createElement(p.a,{style:h},"Temperature"),r.a.createElement(p.a,{style:b},e.temperature+"\u2103")))},G=function(e){return r.a.createElement(p.a,{md:"auto",xs:"auto"},r.a.createElement(f.a,{className:"justify-content-center",style:h}," ",["FAM","HEX","ROX","CY5"][e.index]," "),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("img",{src:function(){if(!e.isShow)return"/static/img/off.bmp";switch(e.filter){case"FAM":return"/static/img/fam.bmp";case"HEX":return"/static/img/hex.bmp";case"ROX":return"/static/img/rox.bmp";case"CY5":return"/static/img/cy5.bmp";default:return"/static/img/off.bmp"}}(),style:x,id:e.index,onClick:e.displayHandler})),r.a.createElement(f.a,{className:"justify-content-center",style:b,disabled:e.isShow},"\xa0",e.resultCt?e.resultCt:"","\xa0"))},J="http://"+a(1361).hostname()+":6009",K=J+"/api/task/status",U=J+"/api/task/start",W=J+"/api/task/stop",Z=J+"/api/protocol/list",V=J+"/api/protocol/select",q=J+"/api/protocol/create",Q=J+"/api/protocol/edit",$=J+"/api/protocol/delete",ee=J+"/api/history/list",te=J+"/api/history/graphdata",ae=J+"/api/history/tempdata",ne=J+"/api/magneto/run",re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fetch(ne,{method:"POST",headers:{"Content-Type":"text/plain"},body:e}).then((function(e){return e.json()})).then((function(e){"ok"===e.result?null!=t&&t(e.data):alert(e.reason)}))},oe=function(){return re},ce={margin:"10px auto",fontFamily:"Consolas, sans-serif"},le={fontFamily:"Consolas, sans-serif"},ie=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],c=a[1],l=function(e){fetch(V,{method:"POST",headers:{"Content-Type":"text/plain"},body:e.toString()}).then((function(e){return e.json()})).then((function(e){"ok"===e.result||alert(e.reason)}))};return Object(n.useEffect)((function(){fetch(Z,{method:"POST"}).then((function(e){return e.json()})).then((function(e){e.result,c(e.protocols),1===e.protocols.length&&l(e.protocols[0].id)}))}),[]),r.a.createElement(p.a,{as:"select",md:"8",xs:"8",style:ce,onChange:function(e){var t=e.target.value;l(t)}},o.map((function(t,a){return r.a.createElement("option",{key:a,style:le,value:t.id,selected:t.name==e.protocolName},t.name)})))},se=function(e){var t=Object(n.useState)([{},{},{},{}]),a=Object(d.a)(t,2),o=a[0];a[1];return Object(n.useEffect)((function(){var t=e.results.filter((function(e){return e}));e.filterNames.filter((function(e){return e})).forEach((function(e,a){o[a].name=e,o[a].result=t[a]?t[a]:""}))}),[e.results,e.filterNames]),r.a.createElement(p.a,null,r.a.createElement("table",{style:y},r.a.createElement("thead",null,r.a.createElement("th",{style:j},"Target"),r.a.createElement("th",{style:j},"Result")),r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:t,style:j},r.a.createElement("td",{style:j},"\xa0",e.name?e.name:"","\xa0"),r.a.createElement("td",{style:v},"\xa0",e.result?e.result:"","\xa0"))})))))},ue=function(){var e=Object(i.k)(),t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),m=u[0],E=u[1],h=Object(n.useState)(["","","",""]),b=Object(d.a)(h,2),y=b[0],j=b[1],v=Object(n.useState)(["","","",""]),x=Object(d.a)(v,2),S=(x[0],x[1]),C=Object(n.useState)(["","","",""]),k=Object(d.a)(C,2),w=k[0],_=k[1],N=Object(n.useState)([!0,!0,!0,!0]),H=Object(d.a)(N,2),F=H[0],R=H[1],I=Object(n.useState)(["","","",""]),z=Object(d.a)(I,2),L=z[0],A=z[1],D=Object(n.useState)(["","","",""]),B=Object(d.a)(D,2),M=B[0],J=B[1],Z=Object(n.useState)(""),V=Object(d.a)(Z,2),q=V[0],Q=V[1],$=Object(n.useState)([]),ee=Object(d.a)($,2),te=(ee[0],ee[1]),ae=Object(n.useState)([]),ne=Object(d.a)(ae,2),re=(ne[0],ne[1]),oe=Object(n.useState)([[],[],[],[]]),ce=Object(d.a)(oe,2),le=ce[0],ue=ce[1],me=Object(n.useState)(0),de=Object(d.a)(me,2),fe=de[0],pe=de[1],Ee=Object(n.useState)(""),ge=Object(d.a)(Ee,2),he=ge[0],be=ge[1],ye=Object(n.useState)(!1),je=Object(d.a)(ye,2),ve=je[0],Oe=je[1],xe=Object(n.useState)(0),Se=Object(d.a)(xe,2),Ce=(Se[0],Se[1]),ke=Object(n.useState)(0),we=Object(d.a)(ke,2),_e=we[0],Ne=we[1],Pe=Object(n.useState)(0),Te=Object(d.a)(Pe,2),He=(Te[0],Te[1]),Fe=Object(n.useState)(0),Re=Object(d.a)(Fe,2),Ie=(Re[0],Re[1]),ze=Object(n.useState)(0),Le=Object(d.a)(ze,2),Ae=(Le[0],Le[1]),De=Object(n.useState)(0),Be=Object(d.a)(De,2),Me=(Be[0],Be[1]),Xe=function(e){var t=e.target.id;R(F.map((function(e,a){return a==t?!e:e})))},Ye=function(){fetch(K,{method:"POST"}).then((function(e){return e.json()})).then((function(e){c(e.result);var t=e.data;E(t.serialNumber),j(t.filters),S(t.filterCts),_(t.filterNames),A(t.result),J(t.resultCts),Q(t.protocolName),te(t.protocols),re(t.magnetoProtocols),ue(t.photodiodes),pe(t.temperature),be(t.stateString),Oe(t.running),Ce(t.remainSec),Ne(t.remainingTotalSec),He(t.elapsedTime),Ie(t.remainingGotoCount),Ae(t.totalActionNumber),Me(t.currentActionNumber)}))};return Object(n.useEffect)((function(){var e=setInterval(Ye,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"5"},r.a.createElement(g,{title:"Connection"},r.a.createElement(P,{serialNumber:m,isConnected:o}))),r.a.createElement(p.a,{md:"5"},r.a.createElement(g,{title:"Progress"},r.a.createElement(T,{protocolName:q,state:he,remainingTotalSec:_e})))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"10",xs:"10"},r.a.createElement(X,{photodiodes:le,displayFilters:F}))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"4"},r.a.createElement(g,{title:"Device"},r.a.createElement(Y,{temperature:fe}))),r.a.createElement(p.a,{md:{span:"5",offset:"1"}},r.a.createElement(g,{title:"CT Value"},r.a.createElement(f.a,{className:"justify-content-center"},y.map((function(e,t){return r.a.createElement(G,{key:t,isShow:F[t],displayHandler:Xe,filter:e,index:t,resultCt:M[t]})})))))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"4"},r.a.createElement(g,{title:"Protocol"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(ie,null)),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{as:"button",md:"8",xs:"8",style:O,onClick:function(e){fetch(ve?W:U,{method:"POST"}).then((function(e){return e.json()})).then((function(e){}))}}," ",ve?"Stop":"Start"," ")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{as:"button",md:"8",xs:"8",style:O,onClick:function(t){ve?alert("pcr is running"):e.push("setup")},disabled:ve}," Setup ")))),r.a.createElement(p.a,{md:{span:"5",offset:"1"}},r.a.createElement(g,{title:"Result"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(se,{filterNames:w,results:L}))))))},me=a(1384),de={selected:{backgroundColor:"rgba(0, 0, 0, .4)",fontFamily:"Consolas, sans-serif",padding:"5px",border:"none",borderRadius:"0px"},default:{backgroundColor:"#FFF",fontFamily:"Consolas, sans-serif",padding:"5px",border:"none",borderRadius:"0px"},listGroup:{width:"100%",height:"120px",overflowY:"scroll",backgroundColor:"white",borderRadius:"0px",margin:"10px"},button:{width:"100%",margin:"10px",justifyContent:"center"}},fe=function(e){return r.a.createElement(me.a,{style:de.listGroup},e.protocols.map((function(t,a){return r.a.createElement(me.a.Item,{key:a,id:a,onClick:e.handler,style:t.selected?de.selected:de.default},t.name)})))},pe=a(1377),Ee=a(1381),ge=I()(F.a),he={responsive:!1,displaylogo:!0,scrollZoom:!1,staticPlot:!0,displayModeBar:!1},be=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(d.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){-1!==e.history.id&&fetch(ae,{method:"POST",headers:{"Content-Type":"text/plain"},body:e.history.id.toString()}).then((function(e){return e.json()})).then((function(e){return JSON.parse(e.tempData)})).then((function(e){return function(e){var t=[],a=[];return e.forEach((function(e){var n=e.split("\t");t.push(n[0]),a.push(n[1])})),{name:"temparture",x:t,y:a,type:"line",line:{color:"#45B5C6"}}}(e)})).then((function(e){return c(e)})),-1!==e.history.id&&fetch(te,{method:"POST",headers:{"Content-Type":"text/plain"},body:e.history.id.toString()}).then((function(e){return e.json()})).then((function(e){return JSON.parse(e.graphData)})).then((function(e){return function(e){var t=["#105f89","#54ab48","#80c13f","#d92623"];return e=["FAM","HEX","ROX","CY5"].map((function(a,n){return{name:a,x:e[n].length,y:e[n],type:"line",line:{color:t[n]}}}))}(e)})).then((function(e){return m(e)}))}),[e.show]),r.a.createElement(Ee.a,Object.assign({"aria-labelledby":"contained-modal-title-vcenter",size:"xl"},e),r.a.createElement(Ee.a.Header,null,e.history.date),r.a.createElement(Ee.a.Body,null,r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"10",sm:"12",style:_},r.a.createElement(ge,{style:N,data:u,layout:k,config:he})),r.a.createElement(p.a,{md:"10",sm:"12",style:_},r.a.createElement(ge,{style:N,data:o,layout:w,config:he}))))),r.a.createElement(Ee.a.Footer,null,r.a.createElement("button",{onClick:e.onHide},"Close")))},ye={height:"250px",overflowY:"scroll"},je={fontFamily:"Consolas, sans-serif"},ve={id:-1,date:"",target:"",filter:"",ct:"",result:""},Oe=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(ve),i=Object(d.a)(l,2),s=i[0],u=i[1];return r.a.createElement(p.a,{style:ye},r.a.createElement(pe.a,{hover:!0,bordered:!0,size:"sm",style:S},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Date Time"),r.a.createElement("th",null,"Target"),r.a.createElement("th",null,"Filter"),r.a.createElement("th",null,"CT Value"),r.a.createElement("th",null,"Result"))),r.a.createElement("tbody",{style:C},e.histories.map((function(t,a){return r.a.createElement("tr",{key:a,onClick:function(t){return function(t,a){u(e.histories[a]),c(!0)}(0,a)}},r.a.createElement("td",{style:je},"#"+a),r.a.createElement("td",{style:je},t.date),r.a.createElement("td",{style:je},t.target.join(", ")),r.a.createElement("td",{style:je},t.filter.join(", ")),r.a.createElement("td",{style:je},t.ct.join(", ")),r.a.createElement("td",{style:je},t.result.join(", ")))}))),r.a.createElement(be,{onHide:function(){c(!1)},history:s,show:o})))},xe=function(){var e=Object(i.k)(),t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),u=Object(d.a)(l,2),m=u[0],E=u[1],h=Object(n.useState)(-1),b=Object(d.a)(h,2),y=b[0],j=b[1],v=function(){fetch(Z,{method:"POST"}).then((function(e){return e.json()})).then((function(e){"ok"===e.result?(e.protocols.forEach((function(e){e.selected=!1})),c(e.protocols)):alert("You need to make the protocol first.")}))};return Object(n.useEffect)((function(){v(),fetch(ee,{method:"POST"}).then((function(e){return e.json()})).then((function(e){if("ok"===e.result){var t=e.histories;t.forEach((function(e){e.target=JSON.parse(e.target).filter((function(e){return e})),e.filter=JSON.parse(e.filter).filter((function(e){return e})),e.result=JSON.parse(e.result).filter((function(e){return e})),e.ct=JSON.parse(e.ct).filter((function(e){return e}))})),E(t)}}))}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"9"},r.a.createElement(g,{title:"Protocol Manager"},r.a.createElement(f.a,null,r.a.createElement(p.a,{md:"8",xs:"8"},r.a.createElement(fe,{protocols:o,handler:function(e){var t=e.target.id;-1===y?(o[t].selected=!0,j(t)):y===t?(o[y].selected=!1,j(-1)):(o[y].selected=!1,o[t].selected=!0,j(t))}})),r.a.createElement(p.a,{md:{span:"2",offset:"1"},xs:"auto"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{as:"button",style:O,onClick:function(t){e.push("editor/new")}},"Add")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{as:"button",style:O,onClick:function(t){-1===y?alert("You need to select the protocol first."):e.push("editor/"+encodeURIComponent(o[y].name))}},"Edit")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{as:"button",style:O,onClick:function(e){if(-1!==y){var t=o[y].name,a=o[y].id;window.confirm("confirm to delete this protocol(".concat(t,")"))&&fetch($,{method:"POST",headers:{"Content-Type":"text/plain"},body:a.toString()}).then((function(e){return e.json()})).then((function(e){alert("complete to delete protocol(".concat(t,")")),v()}))}else alert("You need to select the protocol first.")}},"Delete"))))))),r.a.createElement(f.a,{className:"justify-content-md-center"},r.a.createElement(p.a,{md:"9"},r.a.createElement(g,{title:"History"},r.a.createElement(Oe,{histories:m})))),r.a.createElement(f.a,{style:{justifyContent:"center"}},r.a.createElement("button",{style:O,onClick:function(){return e.replace("")}},"Back")))},Se={textarea:{resize:"none",outline:"none",fontSize:"16px",padding:"5px 10px",fontFamily:"Consolas, sans-serif",width:"100%",border:"1px solid rgba(0, 0, 0, .4)"}},Ce=function(e){return r.a.createElement("textarea",{required:!0,cols:"60",rows:e.rows||"10",name:e.name,index:0,value:e.protocol,style:Se.textarea,onKeyDown:function(e){if(9===e.keyCode){e.preventDefault();var t=e.target.value,a=e.target.selectionStart,n=e.target.selectionEnd;return e.target.value=t.substring(0,a)+"\t"+t.substring(n),e.target.selectionStart=e.target.selectionEnd=a+1,!1}if(13===e.keyCode){var r=e.target.value.split("\n").map((function(e){return e.trim()}));e.target.value=r.join("\n")}},onChange:e.handler})},ke={form:{margin:"auto 10px"},text:{fontSize:"14px",fontWeight:"600",fontFamily:"Consolas, sans-serif",margin:"auto"},image:{border:"1px solid #adadad",backgroundColor:"#e1e1e1",textAlign:"center",padding:"5px",margin:"5px 10px"},input:{width:"80px",height:"30px",padding:"3px",margin:"5px 0px",outline:"none"}},we=function(e){return r.a.createElement(p.a,{ms:"auto",xs:"auto",style:ke.form},r.a.createElement(f.a,null,r.a.createElement("span",{style:ke.text},e.filterType),r.a.createElement("input",{type:"text",style:ke.input,name:e.filterType,value:e.filterName,onChange:e.filterNamesHandler,disabled:!e.filter})),r.a.createElement(f.a,null,r.a.createElement("img",{style:ke.image,name:e.filterType,src:function(){if(!e.filter)return"/static/img/off.bmp";switch(e.filterType){case"FAM":return"/static/img/fam.bmp";case"HEX":return"/static/img/hex.bmp";case"ROX":return"/static/img/rox.bmp";case"CY5":return"/static/img/cy5.bmp";default:return"/static/img/off.bmp"}}(),onClick:e.filtersHandler}),r.a.createElement("input",{type:"number",min:"0",style:ke.input,name:e.filterType,value:e.filterCt,onChange:e.filterCtsHandler,disabled:!e.filter})))},_e={text:{display:"flex",justifyContent:"center",textAlign:"center",fontWeight:"500",margin:"auto 0px"},input:{height:"30px",fontSize:"0.8em",fontWeight:"600",fontFamily:"Consolas, sans-serif",padding:"2px 5px",margin:"auto 20px auto 0px",outline:"none"},button:{border:"1px solid rgba(0, 0, 0, .3)",width:"100px",margin:"20px 30px",outlineColor:"rgba(0, 0, 0, .4)"},form:{display:"inline",margin:"auto 10px"}},Ne=function(e){var t=Object(i.k)(),a=["FAM","HEX","ROX","CY5"],o="new"!==e.match.params.name,c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],m=l[1],E=Object(n.useState)(-1),h=Object(d.a)(E,2),b=h[0],y=h[1],j=Object(n.useState)(""),v=Object(d.a)(j,2),O=v[0],x=v[1],S=Object(n.useState)(""),C=Object(d.a)(S,2),k=C[0],w=C[1],_=Object(n.useState)(""),N=Object(d.a)(_,2),P=N[0],T=N[1],H=Object(n.useState)([!0,!0,!0,!0]),F=Object(d.a)(H,2),R=F[0],I=F[1],z=Object(n.useState)([38,38,38,38]),L=Object(d.a)(z,2),A=L[0],D=L[1],B=Object(n.useState)(["","","",""]),M=Object(d.a)(B,2),X=M[0],Y=M[1],G=function(e){var t=e.target.name;I(R.map((function(e,n){return a[n]===t?!e:e})))},J=function(e){var t=e.target.name,n=e.target.value;D(A.map((function(e,r){return a[r]===t?n:e})))},K=function(e){var t=e.target.name,n=e.target.value;Y(X.map((function(e,r){return a[r]===t?n:e})))},U=function(e){fetch(Z,{method:"POST"}).then((function(e){return e.json()})).then((function(t){return t.protocols.filter((function(t){return t.name===e}))[0]})).then((function(e){y(e.id?e.id:-1),x(e.protocolName),w(function(e){var t=[];return e.forEach((function(e){var a=e.label,n=Number(e.temp).toFixed(0),r=e.time;"SHOT"===a?t.push(a):t.push([a,n,r].join("\t"))})),t.join("\r\n")}(JSON.parse(e.protocol))),T(JSON.parse(e.magnetoProtocol).join("\r\n"));var t=function(e,t,n){var r=[!1,!1,!1,!1],o=["","","",""],c=[38,38,38,38];return 4!==e.lenght&&e.forEach((function(e,l){var i=a.findIndex((function(t){return t===e}));r[i]=!0,o[i]=t[l],c[i]=n[l]})),{filters:r,filterNames:o,filterCts:c}}(e.filters.split(", "),e.filterNames.split(", "),e.filterCts.split(", ")),n=t.filters,r=t.filterNames,o=t.filterCts;I(n),Y(r),D(o)}))};return Object(n.useEffect)((function(){if(o){var t=decodeURIComponent(e.match.params.name);U(t),x(t)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-md-center"},r.a.createElement(p.a,{md:"auto"},r.a.createElement(g,{title:"Filter(Label, CT)"},r.a.createElement(f.a,{className:"justify-content-center"},a.map((function(e,t){return r.a.createElement(we,{key:t,filter:R[t],filterType:e,filterName:X[t],filterCt:A[t],filtersHandler:G,filterCtsHandler:J,filterNamesHandler:K})}))))),r.a.createElement(p.a,{lg:4,md:3,style:_e.form},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"auto",xs:"5",style:_e.text},"Protocol Name :"),r.a.createElement(p.a,{md:"auto",xs:"5",as:"input",type:"text",style:_e.input,onChange:function(e){return x(e.target.value)},value:O,disabled:o}),r.a.createElement(p.a,{lg:"auto",md:"auto",xs:"12"},r.a.createElement("button",{style:_e.button,onClick:function(e){m(!0);var n=[],r=[],c=[],l=[];R.forEach((function(e,t){e&&(r.push(a[t]),c.push(X[t].trim()),l.push(A[t]))})),n.push(o?b:O),n.push(r.join(", ").trim()),n.push(c.join(", ").trim()),n.push(l.join(", ").trim()),k.split("\n").forEach((function(e){return n.push(e.trim())})),n.push("#"),P.split("\n").forEach((function(e){return n.push(e.trim())})),fetch(o?Q:q,{method:"POST",headers:{"Content-Type":"text/plain"},body:n.join("\r\n").toString()}).then((function(e){return e.json()})).then((function(e){"ok"===e.result?t.replace("/setup"):alert(e.reason)})),m(!1)},disabled:u},"Save"),r.a.createElement("button",{style:_e.button,onClick:function(){t.replace("/setup")}},"Cancel"))))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{lg:"6",md:"5",sm:4},r.a.createElement(g,{title:"PCR Protocol"},r.a.createElement(Ce,{protocol:k,handler:function(e){return w(e.target.value)}}))),r.a.createElement(p.a,{lg:"6",md:"5",sm:4},r.a.createElement(g,{title:"Magneto Protocol"},r.a.createElement(Ce,{protocol:P,handler:function(e){return T(e.target.value)}})))))},Pe={border:"1px solid rgba(0, 0, 0, .4)",borderRadius:"10px",marginBottom:"12px",backgroundColor:"whitesmoke"},Te=function(e){var t=e.title,a=e.children;return r.a.createElement(s.a,{style:Pe,className:"p-2 mb-10 rounded-3"},r.a.createElement("h5",null,t),a)},He=a(1378),Fe=a(1379),Re=a(1383),Ie=a(1380),ze=function(e){var t=e.running,a=Object(n.useState)("chamber goto 3"),o=Object(d.a)(a,2),c=o[0],l=o[1],i=oe();return r.a.createElement(Te,{title:"Command"},r.a.createElement(He.a,null,t&&r.a.createElement(Fe.a,{variant:"info",size:"lg"},"running"),!t&&r.a.createElement(Fe.a,{variant:"light",size:"lg"},"ready"),r.a.createElement(Re.a,{placeholder:"command",as:"input",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement(Ie.a,{variant:t?"outline-secondary":"secondary",disabled:t,onClick:function(e){i(c)}},"Run"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){i("stop")}},"Stop")))},Le=function(e){var t=e.running,a=Object(n.useState)("home\nmagnet off\ngoto 11\npumping down full\npumping up 900\npumping down full\npumping sup 900\npumping sdown full\nmagnet on\npumping sdown 300\nwaiting 5"),o=Object(d.a)(a,2),c=o[0],l=o[1],i=oe();return r.a.createElement(Te,{title:"Protocol"},r.a.createElement(Re.a,{as:"textarea",widdth:"100%",required:!0,rows:"10",value:c,onKeyDown:function(e){if(9===e.keyCode){e.preventDefault();var t=e.target.value,a=e.target.selectionStart,n=e.target.selectionEnd;return e.target.value=t.substring(0,a)+"\t"+t.substring(n),e.target.selectionStart=e.target.selectionEnd=a+1,!1}if(13===e.keyCode){var r=e.target.value.split("\n").map((function(e){return e.trim()}));e.target.value=r.join("\n")}},onChange:function(e){return l(e.target.value)}}),t&&r.a.createElement(Fe.a,{variant:"info",size:"lg"},"running"),!t&&r.a.createElement(Fe.a,{variant:"light",size:"lg"},"ready"),r.a.createElement(Ie.a,{variant:t?"outline-secondary":"secondary",disabled:t,onClick:function(e){i("protocol_check "+c,(function(){return alert("checked, ok")}))}},"Check"),r.a.createElement(Ie.a,{variant:t?"outline-secondary":"secondary",disabled:t,onClick:function(e){i("protocol_run "+c)}},"Run"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){i("stop")}},"Stop"))},Ae=function(e){var t=e.children;return r.a.createElement(Te,{title:"Status"},t)},De=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(d.a)(c,2),i=l[0],u=l[1],m=oe(),E=function(){m("get_status",(function(e){o(e.running),u(e.runningCommand)}))};return Object(n.useEffect)((function(){var e=setInterval(E,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"6"},r.a.createElement(ze,{running:a})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ae,null,"running command: ",i)),r.a.createElement(p.a,{md:"6"},r.a.createElement(Le,{running:a}))))},Be=function(e){var t=e.status_register;return r.a.createElement("div",null,r.a.createElement(Fe.a,{variant:4&t&&"warning"},"sw_f"),r.a.createElement(Fe.a,{variant:8&t&&"warning"},"sw_evn"),r.a.createElement(Fe.a,{variant:128&t&&"warning"},"notperf_cmd"),r.a.createElement(Fe.a,{variant:256&t&&"warning"},"wrong_cmd"),r.a.createElement(Fe.a,{variant:!(512&t)&&"warning"},"uvlo"),r.a.createElement(Fe.a,{variant:!(1024&t)&&"warning"},"th_wrn"),r.a.createElement(Fe.a,{variant:!(2048&t)&&"warning"},"th_sd"),r.a.createElement(Fe.a,{variant:!(4096&t)&&"warning"},"ocd"),r.a.createElement(Fe.a,{variant:!(24576&t)&&"warning"},"step_losses"),r.a.createElement(Fe.a,{variant:!(8192&t)&&"warning"},"step_loss_a"),r.a.createElement(Fe.a,{variant:!(16384&t)&&"warning"},"step_loss_b"))},Me=function(e){var t=e.running,a=e.driver_position,n=e.encoder_position,o=e.status_register,c=oe();return r.a.createElement(Te,{title:"State"},"driver pos: ","".concat(a.toFixed(1))," ",", ","encoder pos: ","".concat(n.toFixed(1)),t&&r.a.createElement(Fe.a,{variant:"info",size:"lg"},"running"),!t&&r.a.createElement(Fe.a,{variant:"light",size:"lg"},"ready"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){console.log("stop"),c("stop")}},"Stop"),r.a.createElement(Be,{status_register:o}))},Xe=function(e){var t=e.running,a=e.actuator,n=e.hasHome,o=e.hasGotoHome,c=e.hasSyncWithEncoderPosition,l=e.hasSetEncoderZeroPosition,i=e.hasGoUntil,s=e.hasReleaseSwitch,u=e.hasHomeShift,m=e.hasSaveBottomPosition,d=oe();return r.a.createElement(Te,{title:"Home"},n&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," home"))}},"Home"),o&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," goto_home"))}},"Go to Home"),i&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," go_until"))}},"Go Until"),s&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," release_switch"))}}," Release Switch"),u&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," home_shift"))}}," Home Shift"),l&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," set_encoder_zero_position"))}},"Set Encoder Zero Position"),c&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," sync_with_encoder_position"))}},"Sync with Encoder Position"),m&&r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){d("".concat(a," save_bottom_position"))}},"Save Bottom Position"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){console.log("stop"),d("stop")}},"Stop"))},Ye=function(e){var t=e.running,a=e.actuator,n=e.unit,o=oe();return r.a.createElement(Te,{title:"Jog"},r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog + 1"))}},"+1 ",n),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog + 5"))}},"+5 ",n),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog + 10"))}},"+10 ",n),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog - 1"))}},"-1 ",n),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog - 5"))}},"-5 ",n),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){o("".concat(a," jog - 10"))}},"-10 ",n),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){console.log("stop"),o("stop")}},"Stop"))},Ge=function(e){var t=e.running,a=e.actuator,o=e.unit,c=Object(n.useState)(""),l=Object(d.a)(c,2),i=l[0],s=l[1],u=oe();return r.a.createElement(Te,{title:"Position"},r.a.createElement(He.a,null,r.a.createElement(Re.a,{placeholder:"position",as:"input",value:i,onChange:function(e){return s(e.target.value)}}),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:t,onClick:function(e){u("".concat(a," position ").concat(i))}},"Go [",o,"]"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){console.log("stop"),u("stop")}},"Stop")))};function Je(e,t,a){return{value:e,writable:t,hexDisplay:a,input:""}}var Ke={abs_pos:Je(0,!0,!1),acc:Je(0,!0,!1),adc_out:Je(0,!1,!1),alram_en:Je(0,!0,!0),config:Je(0,!0,!0),dec:Je(0,!0,!1),el_pos:Je(0,!1,!1),fn_slp_acc:Je(0,!0,!1),fn_slp_dec:Je(0,!0,!1),fs_spd:Je(0,!0,!1),int_spd:Je(0,!0,!1),k_therm:Je(0,!0,!1),kval_acc:Je(0,!0,!1),kval_dec:Je(0,!0,!1),kval_hold:Je(0,!0,!1),kval_run:Je(0,!0,!1),mark:Je(0,!0,!1),max_speed:Je(0,!0,!1),min_speed:Je(0,!0,!1),ocd_th:Je(0,!0,!1),speed:Je(0,!1,!1),st_slp:Je(0,!0,!1),stall_th:Je(0,!0,!1),status:Je(0,!1,!0),step_mode:Je(0,!0,!0)},Ue=function(e){var t=e.name,a=e.info,o=e.running,c=Object(n.useState)(""),l=Object(d.a)(c,2),i=l[0],s=l[1],u=oe();return r.a.createElement(f.a,null,r.a.createElement(p.a,{xs:"3",md:"3"},t),r.a.createElement(p.a,{align:"right",xs:"3",md:"3"},a.hexDisplay?"0x".concat(a.value.toString(16)):"".concat(a.value)),r.a.createElement(p.a,{as:"input",xs:"3",md:"3",value:i,disabled:!a.writable,onChange:function(e){s(e.target.value)}}),r.a.createElement(p.a,{xs:"2",md:"2"},r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:o||!a.writable,onClick:function(e){u("set_register syringe ".concat(t," ").concat(i))}},"write")))},We=function(e){var t=e.actuator,a=e.running,n=e.registers;return Object.entries(n).forEach((function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];Ke[a].value=n})),r.a.createElement(Te,{title:"Registers"},r.a.createElement(f.a,{xs:"1",md:"2"},Object.entries(Ke).map((function(e){var n=Object(d.a)(e,2),o=n[0],c=n[1];return r.a.createElement(p.a,{key:o},r.a.createElement(Ue,{name:o,info:c,running:a,acutator:t}))}))))},Ze=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(0),l=Object(d.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),E=Object(d.a)(m,2),g=E[0],h=E[1],b=Object(n.useState)(0),y=Object(d.a)(b,2),j=y[0],v=y[1],O=Object(n.useState)({}),x=Object(d.a)(O,2),S=x[0],C=x[1],k=oe(),w=function(){k("get_chamber_status",(function(e){o(e.driver_position),u(e.encoder_position),h(e.running),v(e.registers.status),C(e.registers)}))};return Object(n.useEffect)((function(){var e=setInterval(w,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"6"},r.a.createElement(Me,{running:g,driver_position:a,encoder_position:i,status_register:j})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Xe,{running:g,actuator:"chamber",hasHome:!0,hasGotoHome:!0,hasSyncWithEncoderPosition:!0,hasSetEncoderZeroPosition:!0})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ye,{running:g,actuator:"chamber",unit:"deg"})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ge,{running:g,actuator:"chamber",unit:"deg"}))),r.a.createElement(f.a,null,r.a.createElement(p.a,{xs:"12",md:"12"},r.a.createElement(We,{actuator:"chamber",running:g,registers:S}))))},Ve=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(0),l=Object(d.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),E=Object(d.a)(m,2),g=E[0],h=E[1],b=Object(n.useState)(0),y=Object(d.a)(b,2),j=y[0],v=y[1],O=Object(n.useState)({}),x=Object(d.a)(O,2),S=x[0],C=x[1],k=oe(),w=function(){k("get_syringe_status",(function(e){o(e.driver_position),u(e.encoder_position),h(e.running),v(e.registers.status),C(e.registers)}))};return Object(n.useEffect)((function(){var e=setInterval(w,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"6"},r.a.createElement(Me,{running:g,driver_position:a,encoder_position:i,status_register:j})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Xe,{running:g,actuator:"syringe",hasHome:!0,hasGoUntil:!0,hasReleaseSwitch:!0,hasHomeShift:!0,hasSetEncoderZeroPosition:!0,hasSaveBottomPosition:!0})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ye,{running:g,actuator:"syringe",unit:"mm"})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ge,{running:g,actuator:"syringe",unit:"mm"}))),r.a.createElement(f.a,null,r.a.createElement(p.a,{xs:"12",md:"12"},r.a.createElement(We,{actuator:"syringe",running:g,registers:S}))))},qe=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(0),l=Object(d.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(!1),E=Object(d.a)(m,2),g=E[0],h=E[1],b=Object(n.useState)(0),y=Object(d.a)(b,2),j=y[0],v=y[1],O=Object(n.useState)({}),x=Object(d.a)(O,2),S=x[0],C=x[1],k=oe(),w=function(){k("get_filter_status",(function(e){o(e.driver_position),u(e.encoder_position),h(e.running),v(e.registers.status),C(e.registers)}))};return Object(n.useEffect)((function(){var e=setInterval(w,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"6"},r.a.createElement(Me,{running:g,driver_position:a,encoder_position:i,status_register:j})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Xe,{running:g,actuator:"filter",hasHome:!0,hasGoUntil:!0,hasReleaseSwitch:!0,hasHomeShift:!0})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ye,{running:g,actuator:"filter",unit:"deg"})),r.a.createElement(p.a,{md:"6"},r.a.createElement(Ge,{running:g,actuator:"filter",unit:"deg"}))),r.a.createElement(f.a,null,r.a.createElement(p.a,{xs:"12",md:"12"},r.a.createElement(We,{actuator:"filter",running:g,registers:S}))))},Qe=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],c=oe(),l=function(){c("get_magnet_status",(function(e){o(e.running)}))};return Object(n.useEffect)((function(){var e=setInterval(l,500);return function(){clearInterval(e)}}),[]),r.a.createElement(s.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(p.a,{md:"6"},r.a.createElement(Te,{title:"Home"},a&&r.a.createElement(Fe.a,{variant:"info",size:"lg"},"running"),!a&&r.a.createElement(Fe.a,{variant:"light",size:"lg"},"ready"),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:a,onClick:function(e){c("magnet on")}},"On"),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:a,onClick:function(e){c("magnet off")}},"Off"),r.a.createElement(Ie.a,{variant:"outline-secondary",disabled:a,onClick:function(e){c("magnet home")}},"Home"),r.a.createElement(Ie.a,{variant:"secondary",onClick:function(e){c("stop")}},"Stop")))))},$e=a(1382),et=a(113),tt=function(){return r.a.createElement($e.a,{variant:"pills",defaultActiveKey:"/",style:{marginBottom:"10px"}},r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/main"},r.a.createElement($e.a.Link,{eventKey:"/main"},"Main"))),r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/protocol"},r.a.createElement($e.a.Link,{eventKey:"protocol"},"Protocol"))),r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/chamber"},r.a.createElement($e.a.Link,{eventKey:"chamber"},"Chamber"))),r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/syringe"},r.a.createElement($e.a.Link,{eventKey:"syringe",href:"/syringe"},"Syringe"))),r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/filter"},r.a.createElement($e.a.Link,{eventKey:"filter",href:"/filter"},"Filter"))),r.a.createElement($e.a.Item,null,r.a.createElement(et.LinkContainer,{to:"/magnet"},r.a.createElement($e.a.Link,{eventKey:"magnet",href:"/magnet"},"Magnet"))))};c.a.render(r.a.createElement(m,null,r.a.createElement(l.BrowserRouter,null,r.a.createElement(tt,null),r.a.createElement(i.g,null,r.a.createElement(i.d,{exact:!0,path:"/",component:ue}),r.a.createElement(i.d,{path:"/main",component:ue}),r.a.createElement(i.d,{exact:!0,path:"/setup",component:xe}),r.a.createElement(i.d,{path:"/editor/:name",component:Ne}),r.a.createElement(i.d,{path:"/protocol",component:De}),r.a.createElement(i.d,{path:"/chamber",component:Ze}),r.a.createElement(i.d,{path:"/syringe",component:Ve}),r.a.createElement(i.d,{path:"/filter",component:qe}),r.a.createElement(i.d,{path:"/magnet",component:Qe})))),document.getElementById("root"))},588:function(e,t,a){e.exports=a(1366)},869:function(e,t){}},[[588,1,2]]]);
//# sourceMappingURL=main.3f891e34.chunk.js.map